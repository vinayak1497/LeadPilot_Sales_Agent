# Railway Configuration for LeadPilot
# Docs: https://docs.railway.app/reference/config-as-code

[build]
# Use Nixpacks builder (Railway's default)
builder = "NIXPACKS"

# Watch paths - trigger rebuild when these files change
watchPatterns = [
    "ui_client/**",
    "common/**",
    "lead_finder/**",
    "lead_manager/**",
    "sdr/**",
    "requirements*.txt",
    "nixpacks.toml",
    "railway.toml"
]

[deploy]
# Start command - uvicorn with Railway's dynamic PORT
startCommand = "uvicorn ui_client.main:app --host 0.0.0.0 --port $PORT"

# Restart policy - restart on failure with max 10 retries
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Health check endpoint
healthcheckPath = "/health"
healthcheckTimeout = 30

# Number of instances
numReplicas = 1
